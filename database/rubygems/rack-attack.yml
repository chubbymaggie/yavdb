---
- id: rubyadvisory:rubygems:rack-attack:OSVDB-132234
  title: |
    rack-attack Gem for Ruby missing normalization before request path
    processing
  description: "When using rack-attack with a rails app, developers expect the request\npath
    to be normalized. In particular, trailing slashes are stripped so\na request path
    \"/login/\" becomes \"/login\" by the time you're in\nActionController.\n\nSince
    Rack::Attack runs before ActionDispatch, the request path is not\nyet normalized.
    This can cause throttles and blacklists to not work as\nexpected.\n\nE.g., a throttle:\n\n`throttle('logins',
    ...) {|req| req.path == \"/login\" }`\n\nwould not match a request to '/login/',
    though Rails would route\n'/login/' to the same '/login' action. \n"
  affected_package: rack-attack
  patched_versions:
  - ">= 4.3.1"
  package_manager: rubygems
  osvdb: 132234
  disclosed_date: 2015-12-18
  created_date: 2015-12-18
  last_modified_date: 2015-12-18
  credit:
  - Rubysec
  references:
  - https://github.com/rubysec/ruby-advisory-db
  source_url: https://github.com/kickstarter/rack-attack/releases/tag/v4.3.1
- id: snykio:rubygems:rack-attack:20246
  title: Missing Normalization Before Request Path
  description: |+
    [`rack-attack`][1] is Rack middleware for throttling and blocking
    abusive requests.

    Affected versions of `rack-attack` do not normalize the request path.
    This can cause throttles and blacklists to not work as expected.



    [1]: https://rubygems.org/gems/rack-attack
    \nWhen using `rack-attack` with a rails app, developers expect the request
    path to be normalized. In particular, trailing slashes are stripped so a
    request path `/login/` becomes `/login` by the time you\'re in
    `ActionController`.

    Since `Rack::Attack` runs before `ActionDispatch`, the request path is
    not yet normalized. This can cause throttles and blacklists to not work
    as expected.

    E.g., a throttle:

        throttle('logins', ...) {|req| req.path == "/login" }

    would not match a request to `/login/`, though Rails would route
    `/login/` to the same `/login` action.

  affected_package: rack-attack
  vulnerable_versions:
  - "< 4.3.1"
  severity: medium
  package_manager: rubygems
  cwe:
  - CWE-79
  disclosed_date: 2015-12-17
  created_date: 2015-12-17
  last_modified_date: 2015-12-17
  credit:
  - Andres Riancho
  references:
  - http://rubysec.com/advisories/OSVDB-132234/
  - https://github.com/kickstarter/rack-attack/releases/tag/v4.3.1
  source_url: https://snyk.io/vuln/SNYK-RUBY-RACKATTACK-20246
